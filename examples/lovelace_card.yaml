# Example Lovelace cards for CAP Alerts with meteoalarm compatibility

# Card 1: Simple status card with awareness level
type: entity
entity: sensor.cap_alerts_alert
name: Weather Alert Status

# Card 2: Conditional alert display (only shows when alerts are active)
type: conditional
conditions:
  - entity: sensor.cap_alerts_alert
    state_not: "off"
card:
  type: markdown
  content: >
    ## âš ï¸ Weather Alert - {{ states('sensor.cap_alerts_alert') | upper }}

    **Type:** {{ state_attr('sensor.cap_alerts_alert', 'awareness_type') }}
    
    **Active Alerts:** {{ state_attr('sensor.cap_alerts_alert', 'alert_count') }}
    
    ---

    {% set alerts = state_attr('sensor.cap_alerts_alert', 'alerts') %}
    {% if alerts %}
      {% for alert in alerts %}
        ### {{ alert.headline }}

        **Severity:** {{ alert.severity }} ({{ alert.awareness_level }})  
        **Urgency:** {{ alert.urgency }}  
        **Areas:** {{ alert.area }}

        {{ alert.description }}

        {% if alert.instruction %}
        **Instructions:** {{ alert.instruction }}
        {% endif %}

        **Effective:** {{ alert.effective }}  
        **Expires:** {{ alert.expires }}

        ---
      {% endfor %}
    {% endif %}

# Card 3: Detailed alert card with styling and awareness levels
type: markdown
content: >
  {% set level = states('sensor.cap_alerts_alert') %}
  {% set count = state_attr('sensor.cap_alerts_alert', 'alert_count') | int %}
  {% if level != 'off' and count > 0 %}
    {% set alerts = state_attr('sensor.cap_alerts_alert', 'alerts') %}
    {% for alert in alerts %}
      {% if alert.awareness_level == 'red' %}
        # ðŸš¨ EXTREME ALERT
      {% elif alert.awareness_level == 'orange' %}
        # âš ï¸ SEVERE ALERT
      {% elif alert.awareness_level == 'yellow' %}
        # âš¡ MODERATE ALERT
      {% else %}
        # â„¹ï¸ ALERT
      {% endif %}

      **{{ alert.headline }}**

      {{ alert.description }}

      | Property | Value |
      |----------|-------|
      | Awareness Level | {{ alert.awareness_level | upper }} |
      | Severity | {{ alert.severity }} |
      | Urgency | {{ alert.urgency }} |
      | Certainty | {{ alert.certainty }} |
      | Event | {{ alert.event }} |
      | Areas | {{ alert.area }} |
      | Effective | {{ alert.effective }} |
      | Expires | {{ alert.expires }} |

      {% if alert.instruction %}
      **What to do:** {{ alert.instruction }}
      {% endif %}

      ---
    {% endfor %}
  {% else %}
    # âœ… No Active Alerts
    
    All clear - no weather alerts at this time.
  {% endif %}

# Card 4: Compact list view with awareness level
type: entities
title: Weather Alerts
entities:
  - entity: sensor.cap_alerts_alert
    name: Alert Status
  - type: attribute
    entity: sensor.cap_alerts_alert
    attribute: awareness_type
    name: Alert Type
  - type: attribute
    entity: sensor.cap_alerts_alert
    attribute: alert_count
    name: Active Alerts
  - type: conditional
    conditions:
      - entity: sensor.cap_alerts_alert
        state_not: "off"
    row:
      type: markdown
      content: >
        {% set alerts = state_attr('sensor.cap_alerts_alert', 'alerts') %}
        {% if alerts %}
          {% for alert in alerts %}
            **{{ alert.headline }}** ({{ alert.severity }})
          {% endfor %}
        {% endif %}
